<!-- Add a character limit to Title and check for duplicate options later-->
<div class="alert alert-info" role="alert">
  <p>Please fill in a title and at least two unique options.</p>
  <p>Any empty or duplicate options will be discarded when you submit.</p>
</div>
<form novalidate class="simple-form form-group" name="form">
  <div class="input-group input-group-lg">
    <span class="input-group-addon">Title</span>
    <input class="form-control" type="text" name="input" required autocomplete="off"
           ng-model="newPoll.title" ng-trim="true" ng-maxlength="30" />
  </div>
  <div class="alert alert-danger" ng-show="form.input.$invalid && form.input.$viewValue">
    <strong>Too long:</strong> Maximum of 30 characters.
  </div>
  <h3>Options:</h3>
  <div ng-repeat="choice in options" ng-model-options="{allowInvalid: true}">
    <!-- First Two Required Options -->
    <div class="input-group input-group-lg" ng-if="$index <= 1">
      <span class="input-group-addon">{{$index+1}} </span>
      <input class="form-control" type="text" name="choice_{{$index}}" required autocomplete="off"
             ng-model="choice.value" ng-trim="true" ng-maxlength="15" />
    </div>
    
    <!-- Additional Options -->
    <div class="input-group input-group-lg" ng-if="$index > 1">
      <span class="input-group-addon">{{$index+1}} </span>
      <input class="form-control" type="text" name="choice_{{$index}}" autocomplete="off"
             ng-model="choice.value" ng-trim="true" ng-maxlength="15" />
      <span class="input-group-btn">
        <button class="btn btn-danger btn-lg" type="button" ng-click="remove($index)">
          <span class="glyphicon glyphicon-remove-sign"></span>
        </button>
      </span>
    </div>
    <div class="alert alert-danger" 
         ng-show="form['choice_' + $index].$invalid && form['choice_' + $index].$viewValue">
      <strong>Too long:</strong> Maximum of 15 characters.
    </div><br />
  </div>
  <button class="btn btn-primary btn-lg" type="button" ng-click="add()">
    <span class="glyphicon glyphicon-plus"></span>
  </button>
  <button class="btn btn-warning btn-lg" type="button" ng-click="clearEmpty()">
    Clear<!-- <span class="glyphicon glyphicon-refresh"></span> -->
  </button>
  <button class="btn btn-success btn-lg" type="submit" ng-click="update(newPoll, options)">
    <span class="glyphicon glyphicon-ok"></span>
  </button>
</form>